# Nylas Webhooks Microservice Configuration
# Fastify-based microservice for Nylas webhook processing

# ==========================================
# Service Configuration
# ==========================================
PORT=3002
HOST=127.0.0.1        # Use 0.0.0.0 for Docker/containers
NODE_ENV=development  # 'development' or 'production'
LOG_LEVEL=info        # error, warn, info, debug

# ==========================================
# Webhook Configuration
# ==========================================
# Webhook secret for HMAC signature verification
# Get this from Nylas dashboard when setting up webhooks
NYLAS_WEBHOOK_SECRET=your_webhook_secret_here

# Main app URL for forwarding processed webhook events
# Development: http://127.0.0.1:3000
# Production: Internal URL of your main app (e.g., http://main-app:3000)
MAIN_APP_URL=http://127.0.0.1:3000

# ==========================================
# Nylas API Configuration
# ==========================================
# API key for Nylas API access (for webhook verification)
NYLAS_API_KEY=your_nylas_api_key_here
NYLAS_API_URL=https://api.us.nylas.com  # or https://api.eu.nylas.com for EU

# ==========================================
# Webhook Processing Configuration
# ==========================================
# Maximum batch size for webhook processing (default: 100)
MAX_WEBHOOK_BATCH_SIZE=100

# Webhook retry configuration
WEBHOOK_RETRY_ATTEMPTS=3       # Number of retries for failed webhooks
WEBHOOK_RETRY_DELAY=1000       # Initial retry delay in milliseconds

# ==========================================
# Security Configuration
# ==========================================
# Enable/disable signature verification (default: true)
# WARNING: Only disable for testing/development
VERIFY_WEBHOOK_SIGNATURES=true
